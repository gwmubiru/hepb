<ul id="tabs" class="nav nav-tabs" data-tabs="tabs" >
	<li id="p_samples" tab="1" class='active lab-tabs ng-cloak' title='Pending'>
		<a href="#" >
			Pending Samples <% pending_samples_count %> 
			<span class="ion-loading-a" ng-if="still_loading"></span>
		</a>
	</li>
	<li id="r_samples" tab="2" class='lab-tabs ng-cloak' title='Repeat Samples'>
		<a href="#" >
			Repeat Samples <% repeat_samples_count %>
			<span class="ion-loading-a" ng-if="still_loading"></span>
		</a>
	</li>
	<li id="s_samples" tab="3" class='lab-tabs ng-cloak' title='Selected Samples'><a href="#" >Selected Samples (<span class='ng-cloak' ><% selected_samples.length %></span>)</a></li>	
	<!-- <li style="float:right;padding:10px 15px;">
		<span class="badge badge-default">
			Pending - 
			All: 90000 |
			DBS: 80000 |
			Plasma: 10000
		</span></li>	    --> 
</ul>
<div class="tab-content">
	<div class="tab-pane active" >
		<div style='height: 700px;overflow-y: auto;' >
			<div id='lab-spaces1' class='lab-spaces'>
				<div class='row'>
					<div class='col-md-6'>
						<span class='sm-label'>search by envelope/box number</span>
						<input type="text" class="form-control input-sm w-md" ng-model='envelope_number' >
					</div>
					<div class='col-md-6'>
						<span class='sm-label'>search by sample form number</span>
						<input type="text" class="form-control input-sm w-md" placeholder="enter number and press enter" ng-model='sample_search' ng-keypress="getSamples($event,'sample')">
					</div>
				</div>
				<br>	

				<div class="row">
					<div class="col-md-2">

						<div class="list-group ng-cloak" style="height: 800px;overflow-y: auto;">
							<a href="#" ng-repeat='e in pending_envelopes | filter:envelope_number' id="env<% e.pk %>" ng-click="getEnvSamples(e.pk)" class='list-group-item env_list'> 
								<% e.envelope_number %> (<% e.sample_count %>)
							</a>
						</div>

						<!-- <div class="ng-cloak" ng-repeat='e in pending_envelopes | filter:envelope_number'>
							<div ng-if="e.pk==current_env">
								<% e.envelope_number %> (<% e.sample_count %>)
							</div>
							<div ng-if="e.pk!=current_env">
								<a href="#" ng-click="getEnvSamples(e.pk)"><% e.envelope_number %></a>
								(<% e.sample_count %>)
							</div>
						</div> -->
					</div>
					<div class="col-md-10" id="checkboxes">
						<table class="table table-striped table-condensed table-bordered" id="samples-table" >
							<thead>
								<th>HepB Number</th>
								<th>Sample ID</th>
								<th>Location ID</th>
								<th>Form</th>
								<th>
									{% if worksheet.machine_type == 'C' %}
										Instrument/Tube ID
									{% endif %}
								</th>
								<th>
									<label>
										<input type='checkbox' id='check_all' ng-model="check_all" ng-change="setAll()"> 
										<span id='check_all_label'>check all</span>
									</label>
								</th>									
							</thead>
							<tbody>
								 <tr ng-repeat="sample in samples" >
				                    <td class="ng-cloak" ><% sample.hep_number %></td>
				                    <td class="ng-cloak"><% sample.vl_sample_id %></td>
				                    <td class="ng-cloak"><% sample.locator_id %></td>
				                    <td class="ng-cloak"><% sample.form_number %></td>
				                    
				                    <td>
				                    	{% if worksheet.machine_type == 'C' %}
				                    	<input ng-if="sample.in_worksheet==false && sample.sample_type==w_sample_type"  id="ins<% sample.index %>" tabindex="<% sample.index %>" class="form-control input-sm w-md samples" type="text" name="instrument<% sample.id %>" value="" ng-keypress="setSampleIns($event, sample.index)" ng-model="sample.instrument_id">
				                    	{% endif %}
				                    </td>
				                    <td>
				                    	<input ng-if="sample.in_worksheet==false && sample.sample_type==w_sample_type" id="sss<% sample.index %>" tabindex="<% sample.index %>" class="samples" type="checkbox" name="instrument<% sample.id %>" value="" ng-click="setSample($event, sample.index)" ng-model="sample.checked">				                    	
				                    	 <span ng-if="sample.in_worksheet==true">in worksheet</span>
				                    	 <span ng-if="sample.sample_type!=w_sample_type">wrong sample type</span>
				                    </td>
				                </tr> 
							</tbody>
						</table>
					</div>
				</div>			
				
				
			</div>

			<div id='lab-spaces2' class='lab-spaces' style="display:none">
				<div class="row">
					<div class='col-md-6'>
						<span class='sm-label'>search by sample form number</span>
						<input type="text" class="form-control input-sm w-md" placeholder="enter number and press enter" ng-model='repeat_sample_search' ng-keypress="getSamples($event,'repeat_sample')">
					</div>
				</div>
				<br>				
				<table class="table table-striped table-condensed table-bordered" id="samples-table" >
					<thead>
						<th>ART Number</th>
						<th>Sample ID</th>
						<th>Location ID</th>
						<th>Form</th>
						{% if worksheet.machine_type == 'C' %}
							<th>Instrument/Tube ID</th>
						{% endif %}
						<th>Select</th>						
					</thead>
					<tbody>
						 <tr ng-repeat="r in repeat_samples" >
		                    <td class="ng-cloak"><% r.hep_number %></td>
		                    <td class="ng-cloak"><% r.vl_sample_id %></td>
		                    <td class="ng-cloak"><% r.locator_id %></td>
		                    <td class="ng-cloak"><% r.form_number %></td>
		                    
		                    {% if worksheet.machine_type == 'C' %}
		                    <td>
		                    	<input id="rrr_ins<% r.index %>" tabindex="<% r.index %>" class="form-control input-sm w-md samples" type="text" name="instrument<% r.id %>" value="" ng-keypress="setRepeatSampleIns($event, r.index)" ng-model="r.instrument_id">
		                    </td>
		                   {% endif %}
		                   <td>
		                    	<input id="rrr<% r.index %>" tabindex="<% r.index %>" class="samples" type="checkbox" name="instrument<% r.id %>" value="" ng-click="setRepeatSample($event, r.index)" ng-model="r.checked">
		                    </td>
		                </tr> 
					</tbody>
				</table>
			</div>

			<div id='lab-spaces3' class='lab-spaces' style="display:none">
				<table class="table table-striped table-condensed table-bordered" id="samples-table" >
					<thead>
						<th>ART Number</th>
						<th>Sample ID</th>
						<th>Location ID</th>
						<th>Form</th>
						<th>Instrument ID</th>
						<th></th>
						{% if worksheet.machine_type == 'C' %}
						<th>Rack IDs</th>
						{% endif %}
					</thead>
					<tbody >
						<tr ng-repeat="s in selected_samples" ng-init="rack_index=Math.floor($index/5)">
		                    <td class="ng-cloak"><% s.hep_number %></td>
		                    <td class="ng-cloak"><% s.vl_sample_id %></td>
		                    <td class="ng-cloak"><% s.locator_id %></td>
		                    <td class="ng-cloak"><% s.form_number %></td>
		                    <td class="ng-cloak">
		                    	<% s.instrument_id %>
		                    	<input type="hidden" name="instrument<% s.id %>" value="<% s.instrument_id%>">
		                    	<input type="hidden" name="samples" value="<% s.id %>">
		                    	<input type="hidden" name="sample_rack<% s.id %>" value="<% rack_index %>">
		                    </td>
		                    <td><a href="#" ng-click="removeSelectedSample(s)">remove</a></td>
		                    {% if worksheet.machine_type == 'C' %}
		                     <td ng-if="$index%5==0" rowspan="5">
		                     	<input type="text" class="form-control input-sm w-sm" id="racks<% rack_index %>" ng-keypress="nextRack($event, rack_index)" tabindex="<% rack_index %>" name="racks<% rack_index %>" value="">
		                     </td>
		                     {% endif %}
		                </tr> 

					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
$(".lab-tabs").click(function(){
	var tab = $(this).attr('tab');
	$(".lab-spaces").hide();
	$("#lab-spaces"+tab).show();
	$(".lab-tabs").removeClass('active');
	$(this).addClass('active');
});

$("#check_all").click(function(){
	 var checked = $(this).prop('checked');
    $('#checkboxes').find('input:checkbox').prop('checked', checked);
});

$(function(){
	/*$(".racks").change(function(){
		console.log("in side rack");
		if(event.which==13){
			console.log("in side rack");
			var next_index = 1+$(this).attr('tabindex');
			$("#racks"+next_index).focus();
		}
	});*/

	
	
})


function moveToNextRack(){

}

</script>