{% extends "home/layout.html" %}
{% load form_tags %}
{% load staticfiles %}


{% block css %}
	<link rel="stylesheet" href='{% static "home/vendor/datatables/media/css/dataTables.jqueryui.min.css" %}'>
{% endblock %}

{% block js %}
	<script type="text/javascript" src='{% static "home/vendor/datatables/media/js/jquery.dataTables.js" %}'></script>
{% endblock %}

{% block content %}	

<span class="page-title">Forms</span>

<div class="panel panel-default">
	{%if request.GET.ref_number %}
	<span id="completed" class="alert alert-success vl-alert" role="alert">
		Successfully saved, ref number: {{request.GET.ref_number}}
	</span><br><br>
	{% endif %}
	<i>click on reference number to edit</i>
	<table class='table table-bordered table-striped table table-condensed' id='tab_id'>
		<thead>
			<tr>
				<th>#</th>
				<th>Form</th>
				<th>Reference Number</th>
				<th>Dispatch date</th>	
				<th>Facility</th>
			</tr>
		</thead>
		<tbody>
			{% for f in forms %}
			<tr>
				<td>{{ forloop.counter }}</td>				
				<td>{{ f.form_number }}</td>
				<td><a href="{% url 'samples:edit_dispatch' f.dispatch.pk %}">{{ f.dispatch.ref_number}}</a></td>	
				<td>{{ f.dispatch.dispatched_at | date:"Y-m-d H:m:s"}}</td>	
				<td>{{ f.dispatch.facility }}</td>
			</tr>
			{% endfor %}
		</tbody>
		
	</table>
</div>

<script type="text/javascript">
$(document).ready(function() {
	var oTable = $('#tab_id').dataTable({
		"processing": true,
		"paging":false,
		"order": [[ 3, "asc" ]],
	});
});
</script>
{% endblock %}